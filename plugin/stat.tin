#send {set hpbrief long,report};
#gag {>};

#alias {capture_multiline} {
    #var capture_till {%0};
    #var line { };
    #var lines { };
    #class multiline_capture read plugin/stat_capture.tin;
};

#alias {_stbar_update2} {
    capture_multiline >;
    hpbrief %0;
};

#NOP #ç»éªŒ,æ½œèƒ½,æœ€å¤§å†…åŠ›,å†…åŠ›,æœ€å¤§ç²¾åŠ›,ç²¾åŠ›
#NOP #æ°”è¡€ä¸Šé™,æœ€å¤§æ°”è¡€,æ°”è¡€,ç²¾ç¥ä¸Šé™,æœ€å¤§ç²¾ç¥,ç²¾ç¥
#NOP #çœŸæ°”,æˆ˜æ„,é£Ÿç‰©,é¥®æ°´,éæˆ˜æ–—/æˆ˜æ–—ä¸­,ä¸å¿™/å¿™;
#action {^%*#%1,%2,%3,%4,%5,%6#%7,%8,%9,%10,%11,%12#%13,%14,%15,%16,%17,%18$} {
    #var {st.qi_max} {%8};
    #var {st.qi} {%9};
    #var {st.jing_max} {%11};
    #var {st.jing} {%12};
    #var {st.neili_max} {%3};
    #var {st.neili} {%4};
    #var {st.jingli_max} {%5};
    #var {st.jingli} {%6};
    #var {st.food} {%15};
    #var {st.water} {%16};
    #var {st.incombat} {%17};
    #var {st.busy} {%18};

    #math {st.jing_max_avail} {%10*100 / %11};
    #math {st.qi_max_avail} {%7*100 / %8};

    #prompt {^%*#%*,%*} {
        >>ğŸ§‘<199>ã€<849>ç²¾ç¥<899>ã€‘%12/%11 [${st.jing_max_avail}%]ã€<819>æ°”è¡€<899>ã€‘%9/%8 [${st.qi_max_avail}%]ã€<859>ç²¾åŠ›<899>ã€‘%6/%5ã€<819>å†…åŠ›<899>ã€‘%4/%3ã€<829>é£Ÿç‰©<899>ã€‘%15ã€<829>é¥®æ°´<899>ã€‘%16ã€<849>ç»éªŒ<899>ã€‘%1ã€<869>æ½œèƒ½<899>ã€‘%2 <099>
        } {-2};
}

#function {_colorize} {
    #local {color_dry} {<819>};
    #local {color_half} {<839>};
    #local {color_full} {<829>};
    #local {value} %2;
    #if {%3 == 2} {#local {color_full} {<869>}};

    #if {%1 <= 40} {#local {color} ${color_dry}}; 
    #elseif {%1 <= 70} {#local {color} ${color_half}};
    #else {#local {color} ${color_full}};

    #return {${color}${value}<899>}
}

#alias {_stbar_update} {
    #NOP #ç»éªŒ,æ½œèƒ½,æœ€å¤§å†…åŠ›,å†…åŠ›,æœ€å¤§ç²¾åŠ›,ç²¾åŠ›;
    #NOP #æ°”è¡€ä¸Šé™,æœ€å¤§æ°”è¡€,æ°”è¡€,ç²¾ç¥ä¸Šé™,æœ€å¤§ç²¾ç¥,ç²¾ç¥;
    #NOP #çœŸæ°”,æˆ˜æ„,é£Ÿç‰©,é¥®æ°´,éæˆ˜æ–—/æˆ˜æ–—ä¸­,ä¸å¿™/å¿™;
    #action {^#%*,%*,%*,%*,%*,%*$} {
        #var {st.exp} {%%1};
        #var {st.qianneng} {%%2};
        #var {st.neili_max} {%%3};
        #var {st.neili} {%%4};
        #var {st.jingli_max} {%%5};
        #var {st.jingli} {%%6};
        #unaction {^#%*,%*,%*,%*,%*,%*$};
        #action {^#%*,%*,%*,%*,%*,%*$} {
            #var {st.qi_limit} {%%%1};
            #var {st.qi_max} {%%%2};
            #var {st.qi} {%%%3};
            #var {st.jing_limit} {%%%4};
            #var {st.jing_max} {%%%5};
            #var {st.jing} {%%%6};
            #unaction {^#%*,%*,%*,%*,%*,%*$};
            #action {^#%*,%*,%*,%*,%*,%*$} {
                #var {st.zhenqi} {%%%%1};
                #var {st.zhanyi} {%%%%2};
                #var {st.food} {%%%%3};
                #var {st.water} {%%%%4};
                #var {st.incombat} {%%%%5};
                #var {st.busy} {%%%%6};

                #math {st.jing_max_avail} {${st.jing_limit}*100 / ${st.jing_max}};
                #math {st.qi_max_avail} {${st.qi_limit}*100 / ${st.qi_max}};

                #NOP æ•°å€¼ç™¾åˆ†æ¯”;
                #math {st.jing_avail} {${st.jing}*100 / ${st.jing_max}};
                #math {st.qi_avail} {${st.qi}*100 / ${st.qi_max}};
                #math {st.jingli_avail} {${st.jingli}*100 / ${st.jingli_max}};
                #math {st.neili_avail} {${st.neili}*100 / ${st.neili_max}};
                #math {st.food_avail} {${st.food}*100 / 400};
                #math {st.water_avail} {${st.water}*100 / 400};
                #NOP æ•°å€¼é¢œè‰²æ˜¾ç¤º;
                #var {st.text.jin} { @_colorize{${st.jing_avail}; {${st.jing}/${st.jing_max}}} };
                #var {st.text.qi} { @_colorize{${st.qi_avail}; {${st.qi}/${st.qi_max}}} };
                #var {st.text.jingli} { @_colorize{${st.jingli_avail}; {${st.jingli}/${st.jingli_max}}; {2}} };
                #var {st.text.neili} { @_colorize{${st.neili_avail}; {${st.neili}/${st.neili_max}}} };
                #var {st.text.food} { @_colorize{${st.food_avail}; ${st.food}} };
                #var {st.text.water} { @_colorize{${st.water_avail}; ${st.water}} };

                #prompt {^#%*,%*} {
                    >>ğŸ§‘<199>ã€<859>ç²¾ç¥<899>ã€‘${st.text.jin}[${st.jing_max_avail}%] ã€<849>æ°”è¡€<899>ã€‘${st.text.qi}[${st.qi_max_avail}%] ã€<859>ç²¾åŠ›<899>ã€‘${st.text.jingli}ã€<849>å†…åŠ›<899>ã€‘${st.text.neili}ã€<829>é£Ÿç‰©<899>ã€‘${st.text.food}ã€<829>é¥®æ°´<899>ã€‘${st.text.water}<099>
                    } {-2};

                #unaction {^#%*,%*,%*,%*,%*,%*$};
            };
        }
    };

    hpbrief;
};

#ticker {update_status_bar} { _stbar_update } {1};